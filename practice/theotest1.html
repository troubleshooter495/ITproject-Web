<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Тестирование</title>
<link rel="stylesheet" href="theotest1.css">
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
</head>
<body>
<div class="midBlock"> 
	<div class="header">
		<div class="button" id="button1"><div class="headerButton"><a href="/theory">Теория</a><div class="borderButton"><div class="borderLine" id="line1"></div></div></div></div>
		<div class="button" id="button2"><div class="headerButton"><a href="/practice">Практика</a><div class="borderButton"><div class="borderLine" id="line2"></div></div></div></div>
		<div class="button" id="button3"><div class="headerButton"><a href="/pmaster">Онлайн-пианино</a><div class="borderButton"><div class="borderLine" id="line3"></div></div></div></div>
		<a class="logo" href="/"></a>
	</div>
	
	<div class="message"></div>
	<div class="answers">
		<div class="field" id="f1">Ответ1</div>
		<div class="field" id="f2">Ответ1</div>
		<div class="field" id="f3">Ответ1</div>
		<div class="field" id="f4">Ответ1</div>
	</div>
	<div class="continue">Продолжить</div>
</div>
</body>
	<script>
		task=["<img src='img/1.jpg'>","<img src='img/2.jpg'>","<img src='img/3.jpg'>","<img src='img/4.jpg'>","<img src='img/5.jpg'>","Что делает знак диез (#)?","Что делает знак дубль-бемоль(♭♭)?","Какое расстояние от ноты <i>до</i> до <i>ре</i>?","Какая нота находится на расстоянии 3 тона и полутон от ноты <i>ми</i> вверх?","Какая нота находится на расстоянии 2 тона и полутон от ноты <i>фа#</i> вниз?"]
		f1 =[['Ля',false],['До',true],['До',false],['Фа',false],['Ми',false],['Повышает на тон',false],['Повышает на тон',false],["Тон",true],["Ля",false],['Ми',false]];
		f2 = [['Соль',true],["Ре",false],['Ля',false],['Ми',false],['Ре',true],['Повышает на полутон',true],['Повышает на полутон',false],["Полутон",false],["Ля#",false],['До',false]];
		f3 = [['Фа',false],["Си",false],['Соль',false],['Соль',false],['Ля',false],['Понижает на тон',false],['Понижает на тон',true],["Два тона",false],["Си",true],['Ре',false]];
		f4 = [['Ля#',false],["Ми",false],['Си',true],['Ля',true],['До',false],['Понижает на полутон',false],['Понижает на полутон',false],["Тон и полутон",false],["До",false],['До#',true]];
		fields = [f1,f2,f3,f4]
		index = 0;
		rewrite();
		correctans = 0;
		notpressed = true;
		$('.field').click(function(){
			if(notpressed){
				id = $(this).attr('id');
				var t = massive(id)
				if(t[index][1]==false){
					$(this).css('color','red');
				} else correctans++;
				for(var i = 0; i < 4; i++){
					var arr =fields[i];
					if(arr[index][1]){
						$(getString(arr)).css('color','green');
					}
				}
				$('.continue').css('visibility','visible');
				notpressed = false;
			}
		});
		
		$('.continue').click(function(){
			if(index < 9){
				index++;
				rewrite();
				$('.continue').css('visibility','hidden');
				notpressed = true;
			} else if(index == 9) {
				$('.message').html('Тестирование завершено! Вы набрали ' + correctans + ' правильных ответов из 10.');
				index++;
			} else {
				location.href = '/practice';
			}
		});
		
		function rewrite(){
			for(var i = 1; i < 5; i++){
				var t = fields[i-1];
				$('#f'+i).text(t[index][0]);
				$('#f'+i).css('color','black');
			}
			$('.message').html(task[index]);
		}
		function massive(i){
			if(i=='f1') return f1;
			if(i=='f2') return f2;
			if(i=='f3') return f3;
			if(i=='f4') return f4;
			throw Error;
		}
		function getString(arr){
			if(arr==f1) return '#f1';
			if(arr==f2) return '#f2';
			if(arr==f3) return '#f3';
			if(arr==f4) return '#f4';
		}
		$('#button1').mouseover(function(){
			$('#line1').css('width','100%');
		});
		$('#button1').mouseout(function(){
			$('#line1').css('width','0%');
		});
		$('#button2').mouseover(function(){
			$('#line2').css('width','100%');
		});
		$('#button2').mouseout(function(){
			$('#line2').css('width','0%');
		});
		$('#button3').mouseover(function(){
			$('#line3').css('width','100%');
		});
		$('#button3').mouseout(function(){
			$('#line3').css('width','0%');
		});
		$('#button4').mouseover(function(){
			$('#line4').css('width','100%');
		});
		$('#button4').mouseout(function(){
			$('#line4').css('width','0%');
		});	
	</script>
</html>
