<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Практика</title>
<link rel="stylesheet" href="theotest1.css">
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
</head>
<body>
<div class="midBlock"> 
	<div class="header">
		<div class="button" id="button1"><div class="headerButton"><a href="/theory">Теория</a><div class="borderButton"><div class="borderLine" id="line1"></div></div></div></div>
		<div class="button" id="button2"><div class="headerButton"><a href="/practice">Практика</a><div class="borderButton"><div class="borderLine" id="line2"></div></div></div></div>
		<div class="button" id="button3"><div class="headerButton"><a href="/pmaster">Онлайн-пианино</a><div class="borderButton"><div class="borderLine" id="line3"></div></div></div></div>
		<div class="button" id="button4"><div class="headerButton">Информация<div class="borderButton"><div class="borderLine" id="line4"></div></div></div></div>
		<a class="logo" href="/"></a>
	</div>
	
	<div class="message"></div>
	<div class="answers">
		<div class="field" id="f1"></div>
		<div class="field" id="f2"></div>
		<div class="field" id="f3"></div>
		<div class="field" id="f4"></div>
	</div>
	<div class="continue">Продолжить</div>
</div>
</body>
	<script>
		task=['Kакой интервал между первой и второй нотой в мажорном трезвучии?','Kакой интервал между первой и второй нотой в минорном трезвучии?','Какой интервал между второй и третьей нотой в мажорном секстаккорде?','Какой интервал между первой и третьей нотой в минорном квартсекстаккорде?','На каких ступенях строится доминантсептаккорд?','От какой ступени строится терцквартаккорд?', 'От какой ступени строится секундаккорд?'];
		f1 = [['малая терция',false],['малая терция',true],['малая терция',false],['чистая квинта',false],['5-7-1-3',false],['2',true],['2',false]];
		f2 = [['большая терция',true],['большая терция',false],['большая терция',false],['малая секста',true],['3-5-7-9',false],['4',false],['4',true]];
		f3 = [['чистая кварта',false],['чистая кварта',false],['чистая кварта',true],['большая секста',false],['5-7-2-4',true],['5',false],['5',false]];
		f4 = [['тритон',false],['тритон',false],['чистая квинта',false],['малая септима',false],['7-2-4-5',false],['7',false],['7',false]];
		fields = [f1,f2,f3,f4]
		index = 0;
		rewrite();
		correctans = 0;
		notpressed = true;
		$('.field').click(function(){
			if(notpressed){
				id = $(this).attr('id');
				var t = massive(id)
				if(t[index][1]==false){
					$(this).css('color','red');
				} else correctans++;
				for(var i = 0; i < 4; i++){
					var arr =fields[i];
					if(arr[index][1]){
						$(getString(arr)).css('color','green');
					}
				}
				$('.continue').css('visibility','visible');
				notpressed = false;
			}
		});
		
		$('.continue').click(function(){
			if(index < 6){
				index++;
				rewrite();
				$('.continue').css('visibility','hidden');
				notpressed = true;
			} else if(index == 6) {
				$('.message').html('Тестирование завершено! Вы набрали ' + correctans + ' правильных ответов из 7.');
				index++;
			} else {
				location.href = '/practice';
			}
		});
		
		function rewrite(){
			for(var i = 1; i < 5; i++){
				var t = fields[i-1];
				$('#f'+i).text(t[index][0]);
				$('#f'+i).css('color','black');
			}
			$('.message').html(task[index]);
		}
		function massive(i){
			if(i=='f1') return f1;
			if(i=='f2') return f2;
			if(i=='f3') return f3;
			if(i=='f4') return f4;
			throw Error;
		}
		function getString(arr){
			if(arr==f1) return '#f1';
			if(arr==f2) return '#f2';
			if(arr==f3) return '#f3';
			if(arr==f4) return '#f4';
		}
		$('#button1').mouseover(function(){
			$('#line1').css('width','100%');
		});
		$('#button1').mouseout(function(){
			$('#line1').css('width','0%');
		});
		$('#button2').mouseover(function(){
			$('#line2').css('width','100%');
		});
		$('#button2').mouseout(function(){
			$('#line2').css('width','0%');
		});
		$('#button3').mouseover(function(){
			$('#line3').css('width','100%');
		});
		$('#button3').mouseout(function(){
			$('#line3').css('width','0%');
		});
		$('#button4').mouseover(function(){
			$('#line4').css('width','100%');
		});
		$('#button4').mouseout(function(){
			$('#line4').css('width','0%');
		});	
	</script>
</html>
