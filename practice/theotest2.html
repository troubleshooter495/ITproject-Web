<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Тестирование</title>
<link rel="stylesheet" href="theotest1.css">
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
</head>
<body>
<div class="midBlock"> 
	<div class="header">
		<div class="button" id="button1"><div class="headerButton"><a href="/theory">Теория</a><div class="borderButton"><div class="borderLine" id="line1"></div></div></div></div>
		<div class="button" id="button2"><div class="headerButton"><a href="/practice">Практика</a><div class="borderButton"><div class="borderLine" id="line2"></div></div></div></div>
		<div class="button" id="button3"><div class="headerButton"><a href="/pmaster">Онлайн-пианино</a><div class="borderButton"><div class="borderLine" id="line3"></div></div></div></div>
		<a class="logo" href="/"></a>
	</div>
	
	<div class="message"></div>
	<div class="answers">
		<div class="field" id="f1"></div>
		<div class="field" id="f2"></div>
		<div class="field" id="f3"></div>
		<div class="field" id="f4"></div>
	</div>
	<div class="continue">Продолжить</div>
</div>
</body>
	<script>
		task=["<img src='img/6.jpg'>","<img src='img/77.jpg'>","<img src='img/8.jpg'>","<img src='img/9.jpg'>","<img src='img/10.jpg'>",'Какая будет вторая нота у интервала <i>чистая кварта</i>, если строить от ноты <i>ре#</i> вверх?','Какая будет вторая нота у интервала <i>малая терция</i>, если строить от ноты <i>соль</i> вверх?','Какая будет вторая нота у интервала <i>большая секста</i>, если строить от ноты <i>ми</i> вверх?','Какая будет вторая нота у интервала <i>малая септима</i>, если строить от ноты <i>до#</i> вверх?','Какая будет вторая нота у интервала <i>чистая квинта</i>, если строить от ноты <i>до</i> вверх?'];
		f1 = [['малая терция',false],['малая септима',true],['большая секунда',false],['чистая квинта',true],['малая терция',false],['соль',false],['си',false],['до',false],['си',true],['фа',true]];
		f2 = [['большая терция',false],['малая секста',false],['тритон',false],['малая секста',false],['большая секунда',false],['соль#',true],['ля',false],['ми',false],['ля#',false],['ми',false]];
		f3 = [['чистая кварта',true],['большая септима',false],['малая терция',true],['большая секста',false],['тритон',false],['ля',false],['ля#',true],['ре#',false],['до',false],['соль',false]];
		f4 = [['чистая квинта',false],['большая секста',false],['большая терция',false],['чистая кварта',false],['большая терция',true],['ля#',false],['до',false],['до#',true],['ля',false],['фа#',false]];
		fields = [f1,f2,f3,f4]
		index = 0;
		rewrite();
		correctans = 0;
		notpressed = true;
		$('.field').click(function(){
			if(notpressed){
				id = $(this).attr('id');
				var t = massive(id)
				if(t[index][1]==false){
					$(this).css('color','red');
				} else correctans++;
				for(var i = 0; i < 4; i++){
					var arr =fields[i];
					if(arr[index][1]){
						$(getString(arr)).css('color','green');
					}
				}
				$('.continue').css('visibility','visible');
				notpressed = false;
			}
		});
		
		$('.continue').click(function(){
			if(index < 9){
				index++;
				rewrite();
				$('.continue').css('visibility','hidden');
				notpressed = true;
			} else if(index == 9) {
				$('.message').html('Тестирование завершено! Вы набрали ' + correctans + ' правильных ответов из 10.');
				index++;
			} else {
				location.href = '/practice';
			}
		});
		
		function rewrite(){
			for(var i = 1; i < 5; i++){
				var t = fields[i-1];
				$('#f'+i).text(t[index][0]);
				$('#f'+i).css('color','black');
			}
			$('.message').html(task[index]);
		}
		function massive(i){
			if(i=='f1') return f1;
			if(i=='f2') return f2;
			if(i=='f3') return f3;
			if(i=='f4') return f4;
			throw Error;
		}
		function getString(arr){
			if(arr==f1) return '#f1';
			if(arr==f2) return '#f2';
			if(arr==f3) return '#f3';
			if(arr==f4) return '#f4';
		}
		$('#button1').mouseover(function(){
			$('#line1').css('width','100%');
		});
		$('#button1').mouseout(function(){
			$('#line1').css('width','0%');
		});
		$('#button2').mouseover(function(){
			$('#line2').css('width','100%');
		});
		$('#button2').mouseout(function(){
			$('#line2').css('width','0%');
		});
		$('#button3').mouseover(function(){
			$('#line3').css('width','100%');
		});
		$('#button3').mouseout(function(){
			$('#line3').css('width','0%');
		});
		$('#button4').mouseover(function(){
			$('#line4').css('width','100%');
		});
		$('#button4').mouseout(function(){
			$('#line4').css('width','0%');
		});	
	</script>
</html>
